<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>立式水封罐計算器</title>
  <style>
    body { font-family: "Microsoft JhengHei", Arial, sans-serif; background: #f8f8f8; }
    .container { max-width: 700px; margin: 40px auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 10px #ccc; padding: 30px; }
    h2 { text-align: center; color: #333; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 8px 10px; }
    th { background: #eee; }
    .input-label { color: #d00; font-weight: bold; }
    .input-box { color: #d00; font-weight: bold; width: 80px; font-size: 1em; }
    .output-label { color: #222; font-weight: bold; }
    .output-value { color: #222; font-weight: bold; }
    .unit { color: #555; }
    .formula { font-size: 0.95em; color: #666; }
    .btn { background: #d00; color: #fff; border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; }
    .btn:hover { background: #a00; }
  </style>
</head>
<body>
  <div class="container">
    <h2>立式水封罐計算器</h2>
    <form id="sealTankForm" oninput="calculateResults()">
      <table>
        <tr>
          <th>項目</th>
          <th>數值</th>
          <th>單位</th>
          <th>說明/公式</th>
        </tr>
        <!-- Input Data -->
        <tr>
          <td class="input-label">溫度 (T)</td>
          <td><input type="number" step="0.1" id="tempC" class="input-box" value="25.0"></td>
          <td class="unit">°C</td>
          <td>輸入溫度</td>
        </tr>
        <tr>
          <td class="input-label">壓力 (P)</td>
          <td><input type="number" step="0.01" id="pressure" class="input-box" value="0.2"></td>
          <td class="unit">kg/cm²(G)</td>
          <td>輸入壓力</td>
        </tr>
        <tr>
          <td class="input-label">分子量 (MW)</td>
          <td><input type="number" step="0.01" id="mw" class="input-box" value="22.6"></td>
          <td class="unit"></td>
          <td>氣體分子量</td>
        </tr>
        <tr>
          <td class="input-label">氣體密度 (ρ<sub>氣</sub>)</td>
          <td><input type="number" step="0.0001" id="gasDensity" class="input-box" value="1.1085"></td>
          <td class="unit">kg/m³</td>
          <td>標準狀態下氣體密度</td>
        </tr>
        <tr>
          <td class="input-label">液體密度 (ρ<sub>液</sub>)</td>
          <td><input type="number" step="0.1" id="liquidDensity" class="input-box" value="1000"></td>
          <td class="unit">kg/m³</td>
          <td>通常為水密度</td>
        </tr>
        <tr>
          <td class="input-label">罐直徑 (D)</td>
          <td><input type="number" step="0.01" id="tankDiameter" class="input-box" value="1.2"></td>
          <td class="unit">m</td>
          <td>罐體外徑</td>
        </tr>
        <tr>
          <td class="input-label">入口管直徑 (d)</td>
          <td><input type="number" step="0.01" id="inletDiameter" class="input-box" value="0.6"></td>
          <td class="unit">m</td>
          <td>入口管道直徑</td>
        </tr>
        <tr>
          <td class="input-label">k<sub>2</sub></td>
          <td><input type="number" step="0.01" id="k2" class="input-box" value="0.75"></td>
          <td class="unit"></td>
          <td>流量係數</td>
        </tr>
        <tr>
          <td class="input-label">水深 (h<sub>2</sub>)</td>
          <td><input type="number" step="0.01" id="h2" class="input-box" value="0.3"></td>
          <td class="unit">m</td>
          <td>水封水深</td>
        </tr>
        <!-- Output Data -->
        <tr>
          <td class="output-label">罐體體積 (V)</td>
          <td class="output-value" id="tankVolume">-</td>
          <td class="unit">m³</td>
          <td class="formula">V = π × (D/2)² × H，H=5.2m（總高）</td>
        </tr>
        <tr>
          <td class="output-label">入口截面積 (A)</td>
          <td class="output-value" id="inletArea">-</td>
          <td class="unit">m²</td>
          <td class="formula">A = π × (d/2)²</td>
        </tr>
        <tr>
          <td class="output-label">水封壓力 (P<sub>seal</sub>)</td>
          <td class="output-value" id="sealPressure">-</td>
          <td class="unit">kPa</td>
          <td class="formula">P<sub>seal</sub> = h<sub>2</sub> × ρ<sub>液</sub> × g / 1000</td>
        </tr>
        <tr>
          <td class="output-label">最大氣體流量 (Q<sub>max</sub>)</td>
          <td class="output-value" id="maxGasFlow">-</td>
          <td class="unit">Nm³/h</td>
          <td class="formula">Q<sub>max</sub> = k<sub>2</sub> × A × √[2 × g × h<sub>2</sub>] × 3600 / ρ<sub>氣</sub></td>
        </tr>
      </table>
      <div style="text-align:center; margin-top:20px;">
        <button type="button" class="btn" onclick="calculateResults()">重新計算</button>
      </div>
    </form>
  </div>
  <script>
    function calculateResults() {
      // 讀取 input
      const tempC = parseFloat(document.getElementById('tempC').value);
      const pressure = parseFloat(document.getElementById('pressure').value);
      const mw = parseFloat(document.getElementById('mw').value);
      const gasDensity = parseFloat(document.getElementById('gasDensity').value);
      const liquidDensity = parseFloat(document.getElementById('liquidDensity').value);
      const tankDiameter = parseFloat(document.getElementById('tankDiameter').value);
      const inletDiameter = parseFloat(document.getElementById('inletDiameter').value);
      const k2 = parseFloat(document.getElementById('k2').value);
      const h2 = parseFloat(document.getElementById('h2').value);

      // 常數
      const pi = Math.PI;
      const g = 9.80665; // m/s²

      // 計算
      // 1. 罐體體積 V = π × (D/2)² × H
      const tankHeight = 5.2; // 固定總高
      const tankVolume = pi * Math.pow(tankDiameter/2, 2) * tankHeight;

      // 2. 入口截面積 A = π × (d/2)²
      const inletArea = pi * Math.pow(inletDiameter/2, 2);

      // 3. 水封壓力 P_seal = h2 × ρ_液 × g / 1000 (kPa)
      const sealPressure = h2 * liquidDensity * g / 1000;

      // 4. 最大氣體流量 Q_max = k2 × A × sqrt(2 × g × h2) × 3600 / ρ_氣
      // 單位換算: m³/s → Nm³/h
      const maxGasFlow = k2 * inletArea * Math.sqrt(2 * g * h2) * 3600 / gasDensity;

      // 輸出
      document.getElementById('tankVolume').innerText = tankVolume.toFixed(3);
      document.getElementById('inletArea').innerText = inletArea.toFixed(4);
      document.getElementById('sealPressure').innerText = sealPressure.toFixed(2);
      document.getElementById('maxGasFlow').innerText = maxGasFlow.toFixed(1);
    }

    // 頁面載入時自動計算
    window.onload = calculateResults;
  </script>
</body>
</html>
